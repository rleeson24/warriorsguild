@{
	ViewBag.Title = "Warriors Guild Guardian Guide | Warriors Guild";
}
@using WarriorsGuild.Utilities
<!-- ko with: intro -->
<section>
	<div class="container">
		<h2 class="text-center">Warrior's Guild Guardian Guide</h2>

		<div class="row">
			<div class="col-sm-12 text-center">
				<!-- 1. The <iframe> (and video player) will replace this <div> tag. -->
				<div id="player"></div>
			</div>
		</div>
		<div class="row">
			<div class="col-sm-12 text-center">
				<button class="btn btn-lg btn-primary" id="btnContinue" data-bind="click: confirmVideoWatched" disabled>
					Continue to Warriors Guild!
				</button>
			</div>
		</div>
	</div>
</section>
<!-- /ko -->

@section Scripts {
	<script src="@Url.ContentVersioned("/bundles/knockout.js")" defer></script>
	<script src="@Url.ContentVersioned("/bundles/intro.js")" defer></script>

	<script defer>
		// 2. This code loads the IFrame Player API code asynchronously.
		var tag = document.createElement('script');

		tag.src = "https://www.youtube.com/iframe_api";
		var firstScriptTag = document.getElementsByTagName('script')[0];
		firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

		// 3. This function creates an <iframe> (and YouTube player)
		//    after the API code downloads.
		var player;
		function onYouTubeIframeAPIReady() {
			player = new YT.Player('player', {
				height: '390',
				width: '640',
				videoId: 'TyT9FzbqCpk',
				playerVars: {
					'playsinline': 1
				},
				events: {
					'onReady': onPlayerReady,
					'onStateChange': onPlayerStateChange
				}
			});
		}

		// 4. The API will call this function when the video player is ready.
		function onPlayerReady(event) {
			event.target.playVideo();
		}

		// 5. The API calls this function when the player's state changes.
		//    The function indicates that when playing a video (state=1),
		//    the player should play for six seconds and then stop.
		var done = false;
		function onPlayerStateChange(event) {
			if (event.data == YT.PlayerState.ENDED) {
				document.getElementById('btnContinue').disabled = false;
			}
		}
		function stopVideo() {
			player.stopVideo();
		}
	</script>
}